!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tmap",[],t):"object"==typeof exports?exports.tmap=t():e.tmap=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(o(4)),n=o(5),l=o(6),i=o(7),a=o(8),u=o(9),c=f(o(10));function f(e){return e&&e.__esModule?e:{default:e}}var s=new Proxy({map:null,rectangle:n.rectangle,circle:l.circle,circleMarker:a.circleMarker,marker:null,polyline:i.polyline,polygon:u.polygon,controls:c.default},{});s.createMap=function(e){return s.map=L.map(e,r.default),s.controls.init(),s.map},s.marker=function(e){};var d=s;t.default=d,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",bubblingMouseEvents:!0,renderer:void 0,className:"",interactive:!0,pane:"overlayPane",attribution:null};t.default=r,e.exports=t.default},function(e,t,o){"use strict";function r(e,t){if(!e||e==={})return new Proxy(t,{});var o=JSON.parse(JSON.stringify(t));for(var r in o)e.hasOwnProperty(r)&&(o[r]=e[r]);for(var n in e)o.hasOwnProperty(n)||(o[n]=e[n]);return new Proxy(o,{})}Object.defineProperty(t,"__esModule",{value:!0}),t.optionFill=r,t.resetStyleHandler=function(e){var t={apply:function(t,o,r){var n,l=Reflect.apply.apply(Reflect,arguments);return e.$options=Object.assign.apply(Object,[e.$options].concat(function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(n=r)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())),e.redraw(),l}},o={set:function(e,t,o,n){return Reflect.set(e,t,o,n),"options"===t&&(e.option=r(e[t],e.$options),e.setStyle(e.option),e.redraw()),!0}};return e.setStyle=new Proxy(e.setStyle,t),e=new Proxy(e,o)}},function(e,t,o){"use strict";var r,n=(r=o(0))&&r.__esModule?r:{default:r};window.T=n.default,n.default.createMap("map"),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png?{foo}",{foo:"bar"}).addTo(n.default.map);var l=[[54.559322,20.767822],[56.1210604,33.02124]],i=n.default.rectangle(l,{color:"#ff7800",weight:1}).addTo(n.default.map);window.s=i,n.default.map.fitBounds(l),n.default.map.addControl(n.default.controls.zoom()),console.log(i),console.log(n.default)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={crs:L.CRS.EPSG3857,center:[0,0],zoom:0,boxZoom:!0,doubleClickZoom:!0,minZoom:0,maxZoom:18,layers:[],maxBounds:void 0,renderer:L.svg(),attributionControl:!1,zoomControl:!1,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0,maxBoundsViscosity:0,closePopupOnClick:!0},n=new Proxy(r,{get:function(e,t,o){return Reflect.get(e,t,o)},set:function(e,t,o,r){return Reflect.set(e,t,o,r),!0}});t.default=n,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleProxy=u,t.rectangle=function(e,t){var o=(0,n.optionFill)(t,a),r=L.rectangle(e,t);return r.$options=o,r=u(r),l.default.map.addLayer(r),r};var r=i(o(1)),n=o(2),l=i(o(0));function i(e){return e&&e.__esModule?e:{default:e}}var a={smoothFactor:1,noClip:!1,t:"rectangle"};function u(e){return(0,n.resetStyleHandler)(e)}(a=Object.assign(r.default,a)).fill=!0},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleProxy=u,t.circle=function(e,t){var o=(0,n.optionFill)(t,a),r=L.circle(e,t);return r.$options=o,r=u(r),l.default.map.addLayer(r),r};var r=i(o(1)),n=o(2),l=i(o(0));function i(e){return e&&e.__esModule?e:{default:e}}var a={radius:0,t:"circle"};function u(e){return(0,n.resetStyleHandler)(e)}(a=Object.assign(r.default,a)).fill=!0},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polylineProxy=u,t.polyline=function(e,t){var o=(0,n.optionFill)(t,a),r=L.polyline(e,t);return r.$options=o,r=u(r),l.default.map.addLayer(r),r};var r=i(o(1)),n=o(2),l=i(o(0));function i(e){return e&&e.__esModule?e:{default:e}}var a={smoothFactor:1,noClip:!1,t:"polyline"};function u(e){return(0,n.resetStyleHandler)(e)}a=Object.assign(r.default,a)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.circleMarkerProxy=u,t.circleMarker=function(e,t){var o=(0,n.optionFill)(t,a),r=L.circleMarker(e,t);return r.$options=o,r=u(r),l.default.map.addLayer(r),r};var r=i(o(1)),n=o(2),l=i(o(0));function i(e){return e&&e.__esModule?e:{default:e}}var a={radius:10,t:"circleMarker"};function u(e){return(0,n.resetStyleHandler)(e)}(a=Object.assign(r.default,a)).fill=!0},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.polygonProxy=u,t.polygon=function(e,t){var o=(0,n.optionFill)(t,a),r=L.polygon(e,t);return r.$options=o,r=u(r),l.default.map.addLayer(r),r};var r=i(o(1)),n=o(2),l=i(o(0));function i(e){return e&&e.__esModule?e:{default:e}}var a={smoothFactor:1,noClip:!1,t:"polygon"};function u(e){return(0,n.resetStyleHandler)(e)}(a=Object.assign(r.default,a)).fill=!0},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=o(0))&&r.__esModule?r:{default:r};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={zoom:o(11).zoomControl,drawer:"",scaleBar:"",graticule:"",printer:"",cts:{},init:function(){n.default.map.addControl=new Proxy(n.default.map.addControl,{apply:function(e,t,o){var r=Reflect.apply.apply(Reflect,arguments);if(o.length>0&&o[0].hasOwnProperty("_leaflet_id")){var l=o[0];n.default.controls.cts[l._leaflet_id]=l}return r}}),n.default.map.removeControl=new Proxy(n.default.map.removeControl,{apply:function(e,t,o){var r=Reflect.apply.apply(Reflect,arguments);if(o.length>0&&o[0].hasOwnProperty("_leaflet_id")){var l=o[0];n.default.controls.cts[l._leaflet_id]&&delete n.default.controls.cts[l._leaflet_id]}return r}})},addControl:function(e,t){var o=n.default.map.addControl(e);return this.cts[t]=o,o},removeControl:function(e){if("object"===l(e))for(var t in n.default.map.removeControl(e),this.cts){if(this.cts[t]._leaflet_id===e._leaflet_id){delete this.cts[t];break}}else{var o=this.cts[e];void 0!==o&&(n.default.map.removeControl(o),delete this.cts[e])}},hide:function(e){e.hide()},show:function(e){e.show()},hideAll:function(){for(var e in this.cts)this.cts[e].hide()},showAll:function(){for(var e in this.cts)this.cts[e].show()}};t.default=i,e.exports=t.default},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zoomControl=void 0;var r={show:!0,activate:!0,opt:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212\t",zoomOutTitle:"Zoom out"}};t.zoomControl=function(){var e=new Proxy(Object.assign({},r),{}),t=L.control.zoom(e.opt);return t.$options=e,t.__proto__.show=function(){this.$options.show=!0,this.$options.activate=!0,this._container.style.display="block"},t.__proto__.hide=function(){this.$options.show=!1,this.$options.activate=!1,this._container.style.display="none"},t}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90bWFwL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly90bWFwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RtYXAvLi9zcmMvY29yZS9UTWFwLmpzIiwid2VicGFjazovL3RtYXAvLi9zcmMvY29tcG9uZW50L1RQYXRoLmpzIiwid2VicGFjazovL3RtYXAvLi9zcmMvY29tcG9uZW50L1ZlY3Rvck9wdFByb3h5LmpzIiwid2VicGFjazovL3RtYXAvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG1hcC8uL3NyYy9jb21wb25lbnQvTWFwT3B0aW9uLmpzIiwid2VicGFjazovL3RtYXAvLi9zcmMvY29tcG9uZW50L1RSZWN0YW5nbGUuanMiLCJ3ZWJwYWNrOi8vdG1hcC8uL3NyYy9jb21wb25lbnQvVENpcmNsZS5qcyIsIndlYnBhY2s6Ly90bWFwLy4vc3JjL2NvbXBvbmVudC9UUG9seWxpbmUuanMiLCJ3ZWJwYWNrOi8vdG1hcC8uL3NyYy9jb21wb25lbnQvVENpcmNsZU1hcmtlci5qcyIsIndlYnBhY2s6Ly90bWFwLy4vc3JjL2NvbXBvbmVudC9UUG9seWdvbi5qcyIsIndlYnBhY2s6Ly90bWFwLy4vc3JjL2NvcmUvQ29udHJvbE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vdG1hcC8uL3NyYy9jb250cm9scy9ab29tLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9NYXBPcHRpb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX1RSZWN0YW5nbGUiLCJfVENpcmNsZSIsIl9UUG9seWxpbmUiLCJfVENpcmNsZU1hcmtlciIsIl9UUG9seWdvbiIsIl9Db250cm9sTWFuYWdlciIsIlQiLCJQcm94eSIsIm1hcCIsInJlY3RhbmdsZSIsImNpcmNsZSIsImNpcmNsZU1hcmtlciIsIm1hcmtlciIsInBvbHlsaW5lIiwicG9seWdvbiIsImNvbnRyb2xzIiwiZGVmYXVsdCIsImNyZWF0ZU1hcCIsImRvbSIsIkwiLCJpbml0Iiwib3B0aW9ucyIsInN0cm9rZSIsImNvbG9yIiwid2VpZ2h0Iiwib3BhY2l0eSIsImxpbmVDYXAiLCJsaW5lSm9pbiIsImRhc2hBcnJheSIsImRhc2hPZmZzZXQiLCJmaWxsIiwiZmlsbENvbG9yIiwiZmlsbE9wYWNpdHkiLCJmaWxsUnVsZSIsImJ1YmJsaW5nTW91c2VFdmVudHMiLCJyZW5kZXJlciIsInVuZGVmaW5lZCIsImNsYXNzTmFtZSIsImludGVyYWN0aXZlIiwicGFuZSIsImF0dHJpYnV0aW9uIiwib3B0aW9uRmlsbCIsInNvdXJjZSIsInRlbXBsYXRlIiwidGVtcCIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImxheWVyIiwiaGFuZGxlciIsImFwcGx5IiwidGFyZ2V0IiwiX3RoaXMiLCJhcmdzIiwicmVzdWx0IiwiUmVmbGVjdCIsImFyZ3VtZW50cyIsIiRvcHRpb25zIiwiYXNzaWduIiwiY29uY2F0IiwicmVkcmF3IiwiaGFuZGxlckxheWVyIiwic2V0IiwicmVjZWl2ZXIiLCJvcHRpb24iLCJzZXRTdHlsZSIsIl9UTWFwIiwid2luZG93IiwidGlsZUxheWVyIiwiZm9vIiwiYWRkVG8iLCJib3VuZHMiLCJmaXRCb3VuZHMiLCJhZGRDb250cm9sIiwiem9vbSIsImNvbnNvbGUiLCJsb2ciLCJjcnMiLCJDUlMiLCJFUFNHMzg1NyIsImNlbnRlciIsImJveFpvb20iLCJkb3VibGVDbGlja1pvb20iLCJtaW5ab29tIiwibWF4Wm9vbSIsImxheWVycyIsIm1heEJvdW5kcyIsInN2ZyIsImF0dHJpYnV0aW9uQ29udHJvbCIsInpvb21Db250cm9sIiwiem9vbUFuaW1hdGlvbiIsInpvb21BbmltYXRpb25UaHJlc2hvbGQiLCJmYWRlQW5pbWF0aW9uIiwibWFya2VyWm9vbUFuaW1hdGlvbiIsInRyYW5zZm9ybTNETGltaXQiLCJ6b29tU25hcCIsInpvb21EZWx0YSIsInRyYWNrUmVzaXplIiwibWF4Qm91bmRzVmlzY29zaXR5IiwiY2xvc2VQb3B1cE9uQ2xpY2siLCJnZW8iLCJvcHQiLCJfVmVjdG9yT3B0UHJveHkiLCJyZWN0YW5nbGVPcHRpb24iLCJUZSIsInJlY3RhbmdsZVByb3h5IiwiYWRkTGF5ZXIiLCJfVFBhdGgiLCJzbW9vdGhGYWN0b3IiLCJub0NsaXAiLCJyZXNldFN0eWxlSGFuZGxlciIsImNpcmNsZU9wdGlvbiIsImNpcmNsZVByb3h5IiwicmFkaXVzIiwicG9seWxpbmVPcHRpb24iLCJwb2x5bGluZVByb3h5IiwiY01hcmtlck9wdGlvbiIsImNpcmNsZU1hcmtlclByb3h5IiwicG9seWdvbk9wdGlvbiIsInBvbHlnb25Qcm94eSIsImRyYXdlciIsInNjYWxlQmFyIiwiZ3JhdGljdWxlIiwicHJpbnRlciIsImN0cyIsImFyZ0FycmF5IiwibGVuZ3RoIiwiY3QiLCJfbGVhZmxldF9pZCIsInJlbW92ZUNvbnRyb2wiLCJjb250cm9sIiwidHlwZSIsIl90eXBlb2YiLCJrIiwidG1wQ3QiLCJoaWRlIiwic2hvdyIsImhpZGVBbGwiLCJzaG93QWxsIiwiem9vbU9wdCIsImFjdGl2YXRlIiwicG9zaXRpb24iLCJ6b29tSW5UZXh0Iiwiem9vbUluVGl0bGUiLCJ6b29tT3V0VGV4dCIsInpvb21PdXRUaXRsZSIsIlR6IiwiX19wcm90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LFlBQWEsVUFDYkMsWUFBYSxZQUNiQyxhQUFjLDJCQUdBLFdBQ2hCLElBQUk1SCxFQUFVLElBQUlkLE1BQU0vQixPQUFPa0YsT0FBTyxHQUFJaUYsR0FBVSxJQUNoRE8sRUFBSy9ILEVBQUUrRyxRQUFReEQsS0FBS3JELEVBQVFnRixLQVloQyxPQVhBNkMsRUFBR3pGLFNBQVdwQyxFQUNkNkgsRUFBR0MsVUFBVVgsS0FBTyxXQUNsQjlLLEtBQUsrRixTQUFTK0UsTUFBTyxFQUNyQjlLLEtBQUsrRixTQUFTbUYsVUFBVyxFQUN6QmxMLEtBQUswTCxXQUFXQyxNQUFNQyxRQUFVLFNBRWxDSixFQUFHQyxVQUFVWixLQUFPLFdBQ2xCN0ssS0FBSytGLFNBQVMrRSxNQUFPLEVBQ3JCOUssS0FBSytGLFNBQVNtRixVQUFXLEVBQ3pCbEwsS0FBSzBMLFdBQVdDLE1BQU1DLFFBQVUsUUFFM0JKIiwiZmlsZSI6InRtYXAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJ0bWFwXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcInRtYXBcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widG1hcFwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4iLCJpbXBvcnQgTWFwT3B0aW9uIGZyb20gJy4uL2NvbXBvbmVudC9NYXBPcHRpb24nO1xuaW1wb3J0IHtyZWN0YW5nbGV9IGZyb20gJy4uL2NvbXBvbmVudC9UUmVjdGFuZ2xlJztcbmltcG9ydCB7Y2lyY2xlfSBmcm9tICcuLi9jb21wb25lbnQvVENpcmNsZSc7XG5pbXBvcnQge3BvbHlsaW5lfSBmcm9tICcuLi9jb21wb25lbnQvVFBvbHlsaW5lJztcbmltcG9ydCB7Y2lyY2xlTWFya2VyfSBmcm9tICcuLi9jb21wb25lbnQvVENpcmNsZU1hcmtlcic7XG5pbXBvcnQge3BvbHlnb259IGZyb20gJy4uL2NvbXBvbmVudC9UUG9seWdvbic7XG5pbXBvcnQgY29udHJvbHMgZnJvbSAnLi9Db250cm9sTWFuYWdlcic7XG5cbmxldCBUID0gbmV3IFByb3h5KHtcbiAgbWFwOiBudWxsLFxuICByZWN0YW5nbGU6IHJlY3RhbmdsZSxcbiAgY2lyY2xlOiBjaXJjbGUsXG4gIGNpcmNsZU1hcmtlcjogY2lyY2xlTWFya2VyLFxuICBtYXJrZXI6IG51bGwsXG4gIHBvbHlsaW5lOiBwb2x5bGluZSxcbiAgcG9seWdvbjogcG9seWdvbixcbiAgY29udHJvbHM6IGNvbnRyb2xzXG5cbn0sIHt9KTtcblQuY3JlYXRlTWFwID0gZnVuY3Rpb24gKGRvbSkge1xuICBULm1hcCA9IEwubWFwKGRvbSwgTWFwT3B0aW9uKTtcbiAgVC5jb250cm9scy5pbml0KCk7XG4gIHJldHVybiBULm1hcDtcbn07XG5ULm1hcmtlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFQ7XG5cblxuIiwibGV0IHBhdGhPcHRpb24gPSB7XG4gIHN0cm9rZTogdHJ1ZSxcbiAgY29sb3I6ICcjMzM4OGZmJyxcbiAgd2VpZ2h0OiAzLFxuICBvcGFjaXR5OiAxLjAsXG4gIGxpbmVDYXA6ICdyb3VuZCcsXG4gIGxpbmVKb2luOiAncm91bmQnLFxuICBkYXNoQXJyYXk6IG51bGwsXG4gIGRhc2hPZmZzZXQ6IG51bGwsXG4gIGZpbGw6IGZhbHNlLFxuICBmaWxsQ29sb3I6IG51bGwsXG4gIGZpbGxPcGFjaXR5OiAwLjIsXG4gIGZpbGxSdWxlOiAnZXZlbm9kZCcsXG4gIGJ1YmJsaW5nTW91c2VFdmVudHM6IHRydWUsXG4gIHJlbmRlcmVyOiB1bmRlZmluZWQsXG4gIGNsYXNzTmFtZTogJycsXG4gIGludGVyYWN0aXZlOiB0cnVlLFxuICBwYW5lOiAnb3ZlcmxheVBhbmUnLFxuICBhdHRyaWJ1dGlvbjogbnVsbFxufTtcbmV4cG9ydCBkZWZhdWx0IHBhdGhPcHRpb247XG4iLCJleHBvcnQgZnVuY3Rpb24gb3B0aW9uRmlsbChzb3VyY2UsIHRlbXBsYXRlKSB7XG4gIGlmICghc291cmNlIHx8IHNvdXJjZSA9PT0ge30pIHtcbiAgICByZXR1cm4gbmV3IFByb3h5KHRlbXBsYXRlLCB7fSk7XG4gIH1cbiAgbGV0IHRlbXAgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRlbXBsYXRlKSk7XG4gIGZvciAobGV0IGtleSBpbiB0ZW1wKSB7XG4gICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB0ZW1wW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgZm9yIChsZXQga2V5IGluIHNvdXJjZSkge1xuICAgIGlmICghdGVtcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICB0ZW1wW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ldyBQcm94eSh0ZW1wLCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFN0eWxlSGFuZGxlcihsYXllcikge1xuICBsZXQgaGFuZGxlciA9IHtcbiAgICAvL3NldFN0eWxlIOWQjiDlkIzmraVvcHRpb25zIOWGheWuueiHsyRvcHRpb25zXG4gICAgYXBwbHk6IGZ1bmN0aW9uICh0YXJnZXQsIF90aGlzLCBhcmdzKSB7XG4gICAgICBsZXQgcmVzdWx0ID0gUmVmbGVjdC5hcHBseSguLi5hcmd1bWVudHMpO1xuICAgICAgbGF5ZXIuJG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGxheWVyLiRvcHRpb25zLCAuLi5hcmdzKTtcbiAgICAgIGxheWVyLnJlZHJhdygpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH07XG4gIC8v55u05o6l5L+u5pS5b3B0aW9ucyDmm7TmlrDlsZ7mgKcg6K6+572u5qC35byP77yM6YeN57uYXG4gIGxldCBoYW5kbGVyTGF5ZXIgPSB7XG4gICAgc2V0OiBmdW5jdGlvbiAodGFyZ2V0LCBwLCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgIFJlZmxlY3Quc2V0KHRhcmdldCwgcCwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgIGlmIChwID09PSAnb3B0aW9ucycpIHtcbiAgICAgICAgdGFyZ2V0Lm9wdGlvbiA9IG9wdGlvbkZpbGwodGFyZ2V0W3BdLCB0YXJnZXQuJG9wdGlvbnMpO1xuICAgICAgICB0YXJnZXQuc2V0U3R5bGUodGFyZ2V0Lm9wdGlvbik7XG4gICAgICAgIHRhcmdldC5yZWRyYXcoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfTtcbiAgbGF5ZXIuc2V0U3R5bGUgPSBuZXcgUHJveHkobGF5ZXIuc2V0U3R5bGUsIGhhbmRsZXIpO1xuICBsYXllciA9IG5ldyBQcm94eShsYXllciwgaGFuZGxlckxheWVyKTtcbiAgcmV0dXJuIGxheWVyO1xufVxuIiwiaW1wb3J0IFQgZnJvbSAnLi9jb3JlL1RNYXAnO1xuXG53aW5kb3cuVCA9IFQ7XG5ULmNyZWF0ZU1hcCgnbWFwJyk7XG5MLnRpbGVMYXllcignaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmc/e2Zvb30nLCB7Zm9vOiAnYmFyJ30pLmFkZFRvKFQubWFwKTtcbnZhciBib3VuZHMgPSBbWzU0LjU1OTMyMiwgMjAuNzY3ODIyXSwgWzU2LjEyMTA2MDQsIDMzLjAyMTI0MF1dO1xuLy8gY3JlYXRlIGFuIG9yYW5nZSByZWN0YW5nbGVcbmxldCBzID0gVC5yZWN0YW5nbGUoYm91bmRzLCB7Y29sb3I6ICcjZmY3ODAwJywgd2VpZ2h0OiAxfSkuYWRkVG8oVC5tYXApO1xud2luZG93LnMgPSBzO1xuLy8gem9vbSB0aGUgbWFwIHRvIHRoZSByZWN0YW5nbGUgYm91bmRzXG5ULm1hcC5maXRCb3VuZHMoYm91bmRzKTtcblQubWFwLmFkZENvbnRyb2woVC5jb250cm9scy56b29tKCkpO1xuY29uc29sZS5sb2cocyk7XG5jb25zb2xlLmxvZyhUKTtcbiIsImxldCBvcHRpb25zID0ge1xuICBjcnM6IEwuQ1JTLkVQU0czODU3LFxuICBjZW50ZXI6IFswLCAwXSxcbiAgem9vbTogMCxcbiAgYm94Wm9vbTogdHJ1ZSxcbiAgZG91YmxlQ2xpY2tab29tOiB0cnVlLFxuICBtaW5ab29tOiAwLFxuICBtYXhab29tOiAxOCxcbiAgbGF5ZXJzOiBbXSxcbiAgbWF4Qm91bmRzOiB1bmRlZmluZWQsXG4gIHJlbmRlcmVyOiBMLnN2ZygpLFxuICBhdHRyaWJ1dGlvbkNvbnRyb2w6IGZhbHNlLFxuICB6b29tQ29udHJvbDogZmFsc2UsXG4gIHpvb21BbmltYXRpb246IHRydWUsXG4gIHpvb21BbmltYXRpb25UaHJlc2hvbGQ6IDQsXG4gIGZhZGVBbmltYXRpb246IHRydWUsXG4gIG1hcmtlclpvb21BbmltYXRpb246IHRydWUsXG4gIHRyYW5zZm9ybTNETGltaXQ6IDgzODg2MDgsIC8vIFByZWNpc2lvbiBsaW1pdCBvZiBhIDMyLWJpdCBmbG9hdFxuICB6b29tU25hcDogMSxcbiAgem9vbURlbHRhOiAxLFxuICB0cmFja1Jlc2l6ZTogdHJ1ZSxcbiAgbWF4Qm91bmRzVmlzY29zaXR5OiAwLFxuICBjbG9zZVBvcHVwT25DbGljazogdHJ1ZVxufTtcblxubGV0IE1hcE9wdGlvbiA9IG5ldyBQcm94eShvcHRpb25zLCB7XG4gIGdldDogZnVuY3Rpb24gKHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHAsIHZhbHVlLCByZWNlaXZlcikge1xuICAgIFJlZmxlY3Quc2V0KHRhcmdldCwgcCwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7XG5leHBvcnQgZGVmYXVsdCBNYXBPcHRpb247XG4iLCJpbXBvcnQgcGF0aE9wdGlvbiBmcm9tICcuL1RQYXRoJztcbmltcG9ydCB7b3B0aW9uRmlsbCwgcmVzZXRTdHlsZUhhbmRsZXJ9IGZyb20gJy4vVmVjdG9yT3B0UHJveHknO1xuaW1wb3J0IFQgZnJvbSAnLi4vY29yZS9UTWFwJztcblxubGV0IHJlY3RhbmdsZU9wdGlvbiA9IHtcbiAgc21vb3RoRmFjdG9yOiAxLjAsXG4gIG5vQ2xpcDogZmFsc2UsXG4gIHQ6ICdyZWN0YW5nbGUnXG59O1xucmVjdGFuZ2xlT3B0aW9uID0gT2JqZWN0LmFzc2lnbihwYXRoT3B0aW9uLCByZWN0YW5nbGVPcHRpb24pO1xucmVjdGFuZ2xlT3B0aW9uLmZpbGwgPSB0cnVlO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVjdGFuZ2xlUHJveHkobGF5ZXIpIHtcbiAgcmV0dXJuIHJlc2V0U3R5bGVIYW5kbGVyKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlY3RhbmdsZShnZW8sIG9wdGlvbnMpIHtcbiAgbGV0IG9wdCA9IG9wdGlvbkZpbGwob3B0aW9ucywgcmVjdGFuZ2xlT3B0aW9uKTtcbiAgbGV0IFRlID0gTC5yZWN0YW5nbGUoZ2VvLCBvcHRpb25zKTtcbiAgVGUuJG9wdGlvbnMgPSBvcHQ7XG4gIFRlID0gcmVjdGFuZ2xlUHJveHkoVGUpO1xuICBULm1hcC5hZGRMYXllcihUZSk7XG4gIHJldHVybiBUZTtcbn1cblxuXG4iLCJpbXBvcnQgcGF0aE9wdGlvbiBmcm9tICcuL1RQYXRoJztcbmltcG9ydCB7b3B0aW9uRmlsbCwgcmVzZXRTdHlsZUhhbmRsZXJ9IGZyb20gJy4vVmVjdG9yT3B0UHJveHknO1xuaW1wb3J0IFQgZnJvbSAnLi4vY29yZS9UTWFwJztcblxubGV0IGNpcmNsZU9wdGlvbiA9IHtcbiAgcmFkaXVzOiAwLjAsXG4gIHQ6ICdjaXJjbGUnXG59O1xuY2lyY2xlT3B0aW9uID0gT2JqZWN0LmFzc2lnbihwYXRoT3B0aW9uLCBjaXJjbGVPcHRpb24pO1xuY2lyY2xlT3B0aW9uLmZpbGwgPSB0cnVlO1xuXG5leHBvcnQgZnVuY3Rpb24gY2lyY2xlUHJveHkobGF5ZXIpIHtcbiAgcmV0dXJuIHJlc2V0U3R5bGVIYW5kbGVyKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNpcmNsZShnZW8sIG9wdGlvbnMpIHtcbiAgbGV0IG9wdCA9IG9wdGlvbkZpbGwob3B0aW9ucywgY2lyY2xlT3B0aW9uKTtcbiAgbGV0IFRlID0gTC5jaXJjbGUoZ2VvLCBvcHRpb25zKTtcbiAgVGUuJG9wdGlvbnMgPSBvcHQ7XG4gIFRlID0gY2lyY2xlUHJveHkoVGUpO1xuICBULm1hcC5hZGRMYXllcihUZSk7XG4gIHJldHVybiBUZTtcbn1cbiIsImltcG9ydCBwYXRoT3B0aW9uIGZyb20gJy4vVFBhdGgnO1xuaW1wb3J0IHtvcHRpb25GaWxsLCByZXNldFN0eWxlSGFuZGxlcn0gZnJvbSAnLi9WZWN0b3JPcHRQcm94eSc7XG5pbXBvcnQgVCBmcm9tICcuLi9jb3JlL1RNYXAnO1xuXG5sZXQgcG9seWxpbmVPcHRpb24gPSB7XG4gIHNtb290aEZhY3RvcjogMS4wLFxuICBub0NsaXA6IGZhbHNlLFxuICB0OiAncG9seWxpbmUnXG59O1xucG9seWxpbmVPcHRpb24gPSBPYmplY3QuYXNzaWduKHBhdGhPcHRpb24sIHBvbHlsaW5lT3B0aW9uKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBvbHlsaW5lUHJveHkobGF5ZXIpIHtcbiAgcmV0dXJuIHJlc2V0U3R5bGVIYW5kbGVyKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBvbHlsaW5lKGdlbywgb3B0aW9ucykge1xuICBsZXQgb3B0ID0gb3B0aW9uRmlsbChvcHRpb25zLCBwb2x5bGluZU9wdGlvbik7XG4gIGxldCBUZSA9IEwucG9seWxpbmUoZ2VvLCBvcHRpb25zKTtcbiAgVGUuJG9wdGlvbnMgPSBvcHQ7XG4gIFRlID0gcG9seWxpbmVQcm94eShUZSk7XG4gIFQubWFwLmFkZExheWVyKFRlKTtcbiAgcmV0dXJuIFRlO1xufVxuIiwiaW1wb3J0IHBhdGhPcHRpb24gZnJvbSAnLi9UUGF0aCc7XG5pbXBvcnQge29wdGlvbkZpbGwsIHJlc2V0U3R5bGVIYW5kbGVyfSBmcm9tICcuL1ZlY3Rvck9wdFByb3h5JztcbmltcG9ydCBUIGZyb20gJy4uL2NvcmUvVE1hcCc7XG5cbmxldCBjTWFya2VyT3B0aW9uID0ge1xuICByYWRpdXM6IDEwLFxuICB0OiAnY2lyY2xlTWFya2VyJ1xufTtcbmNNYXJrZXJPcHRpb24gPSBPYmplY3QuYXNzaWduKHBhdGhPcHRpb24sIGNNYXJrZXJPcHRpb24pO1xuY01hcmtlck9wdGlvbi5maWxsID0gdHJ1ZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNpcmNsZU1hcmtlclByb3h5KGxheWVyKSB7XG4gIHJldHVybiByZXNldFN0eWxlSGFuZGxlcihsYXllcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaXJjbGVNYXJrZXIoZ2VvLCBvcHRpb25zKSB7XG4gIGxldCBvcHQgPSBvcHRpb25GaWxsKG9wdGlvbnMsIGNNYXJrZXJPcHRpb24pO1xuICBsZXQgVGUgPSBMLmNpcmNsZU1hcmtlcihnZW8sIG9wdGlvbnMpO1xuICBUZS4kb3B0aW9ucyA9IG9wdDtcbiAgVGUgPSBjaXJjbGVNYXJrZXJQcm94eShUZSk7XG4gIFQubWFwLmFkZExheWVyKFRlKTtcbiAgcmV0dXJuIFRlO1xufVxuIiwiaW1wb3J0IHBhdGhPcHRpb24gZnJvbSAnLi9UUGF0aCc7XG5pbXBvcnQge29wdGlvbkZpbGwsIHJlc2V0U3R5bGVIYW5kbGVyfSBmcm9tICcuL1ZlY3Rvck9wdFByb3h5JztcbmltcG9ydCBUIGZyb20gJy4uL2NvcmUvVE1hcCc7XG5cbmxldCBwb2x5Z29uT3B0aW9uID0ge1xuICBzbW9vdGhGYWN0b3I6IDEuMCxcbiAgbm9DbGlwOiBmYWxzZSxcbiAgdDogJ3BvbHlnb24nXG59O1xucG9seWdvbk9wdGlvbiA9IE9iamVjdC5hc3NpZ24ocGF0aE9wdGlvbiwgcG9seWdvbk9wdGlvbik7XG5wb2x5Z29uT3B0aW9uLmZpbGwgPSB0cnVlO1xuXG5leHBvcnQgZnVuY3Rpb24gcG9seWdvblByb3h5KGxheWVyKSB7XG4gIHJldHVybiByZXNldFN0eWxlSGFuZGxlcihsYXllcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb2x5Z29uKGdlbywgb3B0aW9ucykge1xuICBsZXQgb3B0ID0gb3B0aW9uRmlsbChvcHRpb25zLCBwb2x5Z29uT3B0aW9uKTtcbiAgbGV0IFRlID0gTC5wb2x5Z29uKGdlbywgb3B0aW9ucyk7XG4gIFRlLiRvcHRpb25zID0gb3B0O1xuICBUZSA9IHBvbHlnb25Qcm94eShUZSk7XG4gIFQubWFwLmFkZExheWVyKFRlKTtcbiAgcmV0dXJuIFRlO1xufVxuIiwiaW1wb3J0IFQgZnJvbSAnLi9UTWFwJztcbmltcG9ydCB7em9vbUNvbnRyb2x9IGZyb20gJy4uL2NvbnRyb2xzL1pvb20nO1xuXG5sZXQgY29udHJvbHMgPSB7XG4gIHpvb206IHpvb21Db250cm9sLFxuICBkcmF3ZXI6ICcnLFxuICBzY2FsZUJhcjogJycsXG4gIGdyYXRpY3VsZTogJycsXG4gIHByaW50ZXI6ICcnLFxuICBjdHM6IHt9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgVC5tYXAuYWRkQ29udHJvbCA9IG5ldyBQcm94eShULm1hcC5hZGRDb250cm9sLCB7XG4gICAgICBhcHBseSh0YXJnZXQsIF90aGlzLCBhcmdBcnJheSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gUmVmbGVjdC5hcHBseSguLi5hcmd1bWVudHMpO1xuICAgICAgICBpZiAoYXJnQXJyYXkubGVuZ3RoID4gMCAmJiBhcmdBcnJheVswXS5oYXNPd25Qcm9wZXJ0eSgnX2xlYWZsZXRfaWQnKSkge1xuICAgICAgICAgIGxldCBjdCA9IGFyZ0FycmF5WzBdO1xuICAgICAgICAgIFQuY29udHJvbHMuY3RzW2N0Ll9sZWFmbGV0X2lkXSA9IGN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSk7XG4gICAgVC5tYXAucmVtb3ZlQ29udHJvbCA9IG5ldyBQcm94eShULm1hcC5yZW1vdmVDb250cm9sLCB7XG4gICAgICBhcHBseSh0YXJnZXQsIF90aGlzLCBhcmdBcnJheSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gUmVmbGVjdC5hcHBseSguLi5hcmd1bWVudHMpO1xuICAgICAgICBpZiAoYXJnQXJyYXkubGVuZ3RoID4gMCAmJiBhcmdBcnJheVswXS5oYXNPd25Qcm9wZXJ0eSgnX2xlYWZsZXRfaWQnKSkge1xuICAgICAgICAgIGxldCBjdCA9IGFyZ0FycmF5WzBdO1xuICAgICAgICAgIGlmIChULmNvbnRyb2xzLmN0c1tjdC5fbGVhZmxldF9pZF0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSBULmNvbnRyb2xzLmN0c1tjdC5fbGVhZmxldF9pZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG4gIGFkZENvbnRyb2w6IGZ1bmN0aW9uIChjb250cm9sLCB0eXBlKSB7XG4gICAgbGV0IGN0ID0gVC5tYXAuYWRkQ29udHJvbChjb250cm9sKTtcbiAgICB0aGlzLmN0c1t0eXBlXSA9IGN0O1xuICAgIHJldHVybiBjdDtcbiAgfSxcbiAgcmVtb3ZlQ29udHJvbDogZnVuY3Rpb24gKGN0KSB7XG4gICAgaWYgKHR5cGVvZiBjdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIFQubWFwLnJlbW92ZUNvbnRyb2woY3QpO1xuICAgICAgZm9yIChsZXQgayBpbiB0aGlzLmN0cykge1xuICAgICAgICBsZXQgdG1wQ3QgPSB0aGlzLmN0c1trXTtcbiAgICAgICAgaWYgKHRtcEN0Ll9sZWFmbGV0X2lkID09PSBjdC5fbGVhZmxldF9pZCkge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmN0c1trXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgdG1wQ3QgPSB0aGlzLmN0c1tjdF07XG4gICAgICBpZiAodG1wQ3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBULm1hcC5yZW1vdmVDb250cm9sKHRtcEN0KTtcbiAgICAgICAgZGVsZXRlIHRoaXMuY3RzW2N0XTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGhpZGU6IGZ1bmN0aW9uIChjdCkge1xuICAgIGN0LmhpZGUoKTtcbiAgfSxcbiAgc2hvdzogZnVuY3Rpb24gKGN0KSB7XG4gICAgY3Quc2hvdygpO1xuICB9LFxuICBoaWRlQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yIChsZXQgayBpbiB0aGlzLmN0cykge1xuICAgICAgdGhpcy5jdHNba10uaGlkZSgpO1xuICAgIH1cbiAgfSxcbiAgc2hvd0FsbDogZnVuY3Rpb24gKCkge1xuICAgIGZvciAobGV0IGsgaW4gdGhpcy5jdHMpIHtcbiAgICAgIHRoaXMuY3RzW2tdLnNob3coKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbnRyb2xzO1xuIiwibGV0IHpvb21PcHQgPSB7XG4gIHNob3c6IHRydWUsXG4gIGFjdGl2YXRlOiB0cnVlLFxuICBvcHQ6IHtcbiAgICBwb3NpdGlvbjogJ3RvcGxlZnQnLFxuICAgIHpvb21JblRleHQ6ICcrJyxcbiAgICB6b29tSW5UaXRsZTogJ1pvb20gaW4nLFxuICAgIHpvb21PdXRUZXh0OiAnJiN4MjIxMlx0JyxcbiAgICB6b29tT3V0VGl0bGU6ICdab29tIG91dCdcbiAgfVxufTtcbmxldCB6b29tQ29udHJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgbGV0IG9wdGlvbnMgPSBuZXcgUHJveHkoT2JqZWN0LmFzc2lnbih7fSwgem9vbU9wdCksIHt9KTtcbiAgbGV0IFR6ID0gTC5jb250cm9sLnpvb20ob3B0aW9ucy5vcHQpO1xuICBUei4kb3B0aW9ucyA9IG9wdGlvbnM7XG4gIFR6Ll9fcHJvdG9fXy5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9wdGlvbnMuc2hvdyA9IHRydWU7XG4gICAgdGhpcy4kb3B0aW9ucy5hY3RpdmF0ZSA9IHRydWU7XG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9O1xuICBUei5fX3Byb3RvX18uaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRvcHRpb25zLnNob3cgPSBmYWxzZTtcbiAgICB0aGlzLiRvcHRpb25zLmFjdGl2YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIH07XG4gIHJldHVybiBUejtcbn07XG5cbmV4cG9ydCB7em9vbUNvbnRyb2x9O1xuXG4iXSwic291cmNlUm9vdCI6IiJ9