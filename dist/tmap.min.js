!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tmap",[],e):"object"==typeof exports?exports.tmap=e():t.tmap=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=p(n(4)),i=n(5),r=n(6),a=n(7),s=n(8),l=n(9),c=p(n(10)),u=n(23);function p(t){return t&&t.__esModule?t:{default:t}}var d=new Proxy({map:null,rectangle:i.rectangle,circle:r.circle,circleMarker:s.circleMarker,marker:null,polyline:a.polyline,polygon:l.polygon,controls:c.default,icon:u.icon},{});d.createMap=function(t){return d.map=L.map(t,o.default),d.controls.init(),d.map},d.marker=function(t){};var h=d;e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",bubblingMouseEvents:!0,renderer:void 0,className:"",interactive:!0,pane:"overlayPane",attribution:null};e.default=o,t.exports=e.default},function(t,e,n){"use strict";function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){if(!t||t==={})return new Proxy(e,{});var n=JSON.parse(JSON.stringify(e));for(var o in n)t.hasOwnProperty(o)&&(n[o]=t[o]);for(var i in t)n.hasOwnProperty(i)||(n[i]=t[i]);return new Proxy(n,{})}Object.defineProperty(e,"__esModule",{value:!0}),e.optionFill=i,e.resetStyleHandler=function(t){var e={apply:function(e,n,i){var r=Reflect.apply.apply(Reflect,arguments);return t.$options=Object.assign.apply(Object,[t.$options].concat(o(i))),t.redraw(),r}},n={set:function(t,e,n,o){return Reflect.set(t,e,n,o),"options"===e&&(t.option=i(t[e],t.$options),t.setStyle(t.option),t.redraw()),!0}};return t.setStyle=new Proxy(t.setStyle,e),t=new Proxy(t,n)}},function(t,e,n){"use strict";var o,i=(o=n(0))&&o.__esModule?o:{default:o};window.T=i.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={crs:L.CRS.EPSG3857,center:[0,0],zoom:0,boxZoom:!0,doubleClickZoom:!0,minZoom:0,maxZoom:18,layers:[],maxBounds:void 0,renderer:L.svg(),attributionControl:!1,zoomControl:!1,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0,maxBoundsViscosity:0,closePopupOnClick:!0},i=new Proxy(o,{get:function(t,e,n){return Reflect.get(t,e,n)},set:function(t,e,n,o){return Reflect.set(t,e,n,o),!0}});e.default=i,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rectangleProxy=l,e.rectangle=function(t,e){var n=(0,i.optionFill)(e,s),o=L.rectangle(t,e);return o.$options=n,o=l(o),r.default.map.addLayer(o),o};var o=a(n(1)),i=n(2),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={smoothFactor:1,noClip:!1,t:"rectangle"};function l(t){return(0,i.resetStyleHandler)(t)}(s=Object.assign(o.default,s)).fill=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circleProxy=l,e.circle=function(t,e){var n=(0,i.optionFill)(e,s),o=L.circle(t,e);return o.$options=n,o=l(o),r.default.map.addLayer(o),o};var o=a(n(1)),i=n(2),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={radius:0,t:"circle"};function l(t){return(0,i.resetStyleHandler)(t)}(s=Object.assign(o.default,s)).fill=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.polylineProxy=l,e.polyline=function(t,e){var n=(0,i.optionFill)(e,s),o=L.polyline(t,e);return o.$options=n,o=l(o),r.default.map.addLayer(o),o};var o=a(n(1)),i=n(2),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={smoothFactor:1,noClip:!1,t:"polyline"};function l(t){return(0,i.resetStyleHandler)(t)}s=Object.assign(o.default,s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circleMarkerProxy=l,e.circleMarker=function(t,e){var n=(0,i.optionFill)(e,s),o=L.circleMarker(t,e);return o.$options=n,o=l(o),r.default.map.addLayer(o),o};var o=a(n(1)),i=n(2),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={radius:10,t:"circleMarker"};function l(t){return(0,i.resetStyleHandler)(t)}(s=Object.assign(o.default,s)).fill=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.polygonProxy=l,e.polygon=function(t,e){var n=(0,i.optionFill)(e,s),o=L.polygon(t,e);return o.$options=n,o=l(o),r.default.map.addLayer(o),o};var o=a(n(1)),i=n(2),r=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}var s={smoothFactor:1,noClip:!1,t:"polygon"};function l(t){return(0,i.resetStyleHandler)(t)}(s=Object.assign(o.default,s)).fill=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i=(o=n(0))&&o.__esModule?o:{default:o},r=n(11),a=n(12),s=n(14),l=n(20),c=n(21);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var p={zoom:r.zoomControl,drawer:"",scaleBar:s.scaleBar,graticule:a.latLngGraticule,printer:c.printer,pointer:l.pointer,legend:"",cts:{},init:function(){i.default.map.addControl=new Proxy(i.default.map.addControl,{apply:function(t,e,n){var o=Reflect.apply.apply(Reflect,arguments);if(n.length>0&&n[0].hasOwnProperty("_leaflet_id")){var r=n[0];i.default.controls.cts[r._leaflet_id]=r}return o}}),i.default.map.removeControl=new Proxy(i.default.map.removeControl,{apply:function(t,e,n){var o=Reflect.apply.apply(Reflect,arguments);if(n.length>0&&n[0].hasOwnProperty("_leaflet_id")){var r=n[0];i.default.controls.cts[r._leaflet_id]&&delete i.default.controls.cts[r._leaflet_id]}return o}})},addControl:function(t,e){var n=i.default.map.addControl(t);return this.cts[e]=n,n},removeControl:function(t){if("object"===u(t))for(var e in i.default.map.removeControl(t),this.cts){if(this.cts[e]._leaflet_id===t._leaflet_id){delete this.cts[e];break}}else{var n=this.cts[t];void 0!==n&&(i.default.map.removeControl(n),delete this.cts[t])}},hide:function(t){t.hide()},show:function(t){t.show()},hideAll:function(){for(var t in this.cts)this.cts[t].hide()},showAll:function(){for(var t in this.cts)this.cts[t].show()}};e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.zoomControl=void 0;var o={show:!0,activate:!0,opt:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212\t",zoomOutTitle:"Zoom out"}};e.zoomControl=function(){var t=Object.assign({},o.opt),e=L.control.zoom(t);return e.__proto__.show=function(){this.$options.show=!0},e.__proto__.hide=function(){this.$options.show=!1},e.$options=new Proxy(Object.assign({},o),{set:function(t,n,o,i){return Reflect.set(t,n,o,i),"show"===n&&(o?(e.$options.activate=!0,e._container.style.display="block"):(e.$options.activate=!1,e._container.style.display="none")),!0}}),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.latLngGraticule=void 0,n(13);var o={show:!0,activate:!0,opt:{showLabel:!0,color:"#333333",dashArray:[5,5],zoomInterval:[{start:1,end:3,interval:10},{start:4,end:4,interval:5},{start:5,end:7,interval:2},{start:8,end:10,interval:1},{start:10,end:12,interval:.5},{start:13,end:15,interval:.1}]}};e.latLngGraticule=function(){var t=Object.assign({},o.opt),e=L.latlngGraticule(t);return e.__proto__.show=function(){T.map.removeLayer(this),this.$options.show=!0},e.__proto__.hide=function(){this.$options.show=!1},e.$options=new Proxy(Object.assign({},o),{set:function(t,n,o,i){return Reflect.set(t,n,o,i),"show"===n&&(o?(e.$options.activate=!0,T.map.addLayer(e)):(e.$options.activate=!1,T.map.removeLayer(e))),!0}}),e}},function(t,e){L.Control.BetterScale=L.Control.extend({options:{position:"bottomright",maxWidth:150,metric:!1,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-better-scale",n=L.DomUtil.create("div",e),o=this.options,i=L.DomUtil.create("div",e+"-ruler",n);return L.DomUtil.create("div",e+"-ruler-block "+e+"-upper-first-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-upper-second-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-lower-first-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-lower-second-piece",i),this._addScales(o,e,n),this.ScaleContainer=n,t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){this._iScale=L.DomUtil.create("div",e+"-label-div",n),this._iScaleLabel=L.DomUtil.create("div",e+"-label",this._iScale),this._iScaleFirstNumber=L.DomUtil.create("div",e+"-label "+e+"-first-number",this._iScale),this._iScaleSecondNumber=L.DomUtil.create("div",e+"-label "+e+"-second-number",this._iScale)},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),i=this.options,r=0;o.x>0&&(r=n*(i.maxWidth/o.x)),this._updateScales(i,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric_old:function(t){var e=this._getRoundNum(t);this._iScale.style.width=this._getScaleWidth(e/t)+"px",this._iScaleLabel.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateMetric:function(t){var e,n,o,i,r,a=t,s=this._iScaleFirstNumber,l=this._iScaleSecondNumber,c=this._iScale;this._iScaleLabel.innerHTML="0",a>500?(e=a/1e3,n=this._getRoundNum(e),i=this._getRoundNum(e/2),c.style.width=this._getScaleWidth(n/e)+"px",s.innerHTML=i,l.innerHTML=n+"km"):(o=this._getRoundNum(a),r=this._getRoundNum(a/2),c.style.width=this._getScaleWidth(o/a)+"px",s.innerHTML=r,l.innerHTML=o+"m")},_updateImperial:function(t){var e,n,o,i,r,a=3.2808399*t,s=this._iScaleFirstNumber,l=this._iScaleSecondNumber,c=this._iScale;this._iScaleLabel.innerHTML="0",a>2640?(e=a/5280,n=this._getRoundNum(e),i=this._getRoundNum(e/2),c.style.width=this._getScaleWidth(n/e)+"px",s.innerHTML=i,l.innerHTML=n+"mi"):(o=this._getRoundNum(a),r=this._getRoundNum(a/2),c.style.width=this._getScaleWidth(o/a)+"px",s.innerHTML=r,l.innerHTML=o+"ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){if(t>=2){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}return(Math.round(100*t)/100).toFixed(1)}}),L.control.betterscale=function(t){return new L.Control.BetterScale(t)},document,L.LatLngGraticule=L.Layer.extend({includes:L.Mixin.Events,options:{showLabel:!0,opacity:1,weight:.8,color:"#aaa",font:"12px Verdana",dashArray:[0,0],lngLineCurved:0,latLineCurved:0,zoomInterval:[{start:2,end:2,interval:40},{start:3,end:3,interval:20},{start:4,end:4,interval:10},{start:5,end:7,interval:5},{start:8,end:20,interval:1}]},initialize:function(t){L.setOptions(this,t),this.options.font.split(" ").length<2&&(this.options.font+=" Verdana"),this.options.fontColor||(this.options.fontColor=this.options.color),this.options.zoomInterval&&(this.options.zoomInterval.latitude&&(this.options.latInterval=this.options.zoomInterval.latitude,this.options.zoomInterval.longitude||(this.options.lngInterval=this.options.zoomInterval.latitude)),this.options.zoomInterval.longitude&&(this.options.lngInterval=this.options.zoomInterval.longitude,this.options.zoomInterval.latitude||(this.options.latInterval=this.options.zoomInterval.longitude)),this.options.latInterval||(this.options.latInterval=this.options.zoomInterval),this.options.lngInterval||(this.options.lngInterval=this.options.zoomInterval))},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("viewreset",this._reset,this),t.on("move",this._reset,this),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){L.DomUtil.remove(this._canvas),t.off("viewreset",this._reset,this),t.off("move",this._reset,this),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._canvas,this},bringToBack:function(){return this._map._panes.overlayPane,this._canvas,this},getAttribution:function(){return this.options.attribution},_initCanvas:function(){this._canvas=L.DomUtil.create("canvas",""),this._map.options.zoomAnimation&&L.Browser.any3d?L.DomUtil.addClass(this._canvas,"leaflet-zoom-animated"):L.DomUtil.addClass(this._canvas,"leaflet-zoom-hide"),this._updateOpacity(),L.extend(this._canvas,{onselectstart:L.Util.falseFn,onmousemove:L.Util.falseFn,onload:L.bind(this._onCanvasLoad,this)})},_animateZoom:function(t){var e=this._map,n=this._canvas,o=e.getZoomScale(t.zoom),i=e.containerPointToLatLng([0,0]),r=e.containerPointToLatLng([n.width,n.height]),a=e._latLngToNewLayerPoint(i,t.zoom,t.center),s=e._latLngToNewLayerPoint(r,t.zoom,t.center)._subtract(a),l=a._add(s._multiplyBy(.5*(1-1/o)));L.DomUtil.setTransform(n,l,o)},_reset:function(){var t=this._canvas,e=this._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(t,n),t.width=e.x,t.height=e.y,t.style.width=e.x+"px",t.style.height=e.y+"px",this.__calcInterval(),this.__draw(!0)},_onCanvasLoad:function(){this.fire("load")},_updateOpacity:function(){L.DomUtil.setOpacity(this._canvas,this.options.opacity)},__format_lat:function(t){return this.options.latFormatTickLabel?this.options.latFormatTickLabel(t):t<0?Number(-1*t).toFixed(2)+"S":t>0?Number(t).toFixed(2)+"N":""+Number(t).toFixed(2)},__format_lng:function(t){return this.options.lngFormatTickLabel?this.options.lngFormatTickLabel(t):t>180?360-t+"W":t>0&&t<180?Number(t).toFixed(2)+"E":t<0&&t>-180?Number(-1*t).toFixed(2)+"W":-180==t?""+Number(-1*t).toFixed(2):t<-180?Number(360+t).toFixed(2)+"W":""+t},__calcInterval:function(){var t=this._map.getZoom();if(this._currZoom!=t&&(this._currLngInterval=0,this._currLatInterval=0,this._currZoom=t),!this._currLngInterval)try{for(var e in this.options.lngInterval)if((n=this.options.lngInterval[e]).start<=t&&n.end&&n.end>=t){this._currLngInterval=n.interval;break}}catch(t){this._currLngInterval=0}if(!this._currLatInterval)try{for(var e in this.options.latInterval){var n;if((n=this.options.latInterval[e]).start<=t&&n.end&&n.end>=t){this._currLatInterval=n.interval;break}}}catch(t){this._currLatInterval=0}},__draw:function(t){var e=this._canvas,n=this._map,o=this.options.lngLineCurved,i=this.options.latLineCurved;if(L.Browser.canvas&&n){var r=function(e,r){if(x=e._latLngToCanvasPoint(L.latLng(r,v)),S=e.__format_lat(r),u=c.measureText(S).width,i){"number"==typeof i&&(C=i);var a=v,s=b;x.x>0&&(a=(a=n.containerPointToLatLng(L.point(0,x.y))).lng-w,x.x=0),(_=e._latLngToCanvasPoint(L.latLng(r,s))).x<h&&(s=(s=n.containerPointToLatLng(L.point(h,_.y))).lng+w,a>0&&s<0&&(s+=360)),c.beginPath(),c.moveTo(x.x,x.y);for(var l=null,d=a;d<=s;d+=C){if(_=e._latLngToCanvasPoint(L.latLng(r,d)),c.lineTo(_.x,_.y),e.options.showLabel&&t&&null!=l)if(l.x<0&&_.x>=0){var f=(_.x-0)/(_.x-l.x),m=_.y-(_.y-l.y)*f;c.fillText(S,0,m+p/2)}else l.x<=h-u&&_.x>h-u&&(f=(_.x-h)/(_.x-l.x),m=_.y-(_.y-l.y)*f,c.fillText(S,h-u,m+p/2-2));l={x:_.x,y:_.y,lon:d,lat:T}}c.stroke()}else{s=b;var _=e._latLngToCanvasPoint(L.latLng(r,s));if(o&&(s=(s=n.containerPointToLatLng(L.point(0,_.y))).lng,_=e._latLngToCanvasPoint(L.latLng(r,s)),a=(a=n.containerPointToLatLng(L.point(h,_.y))).lng,x=e._latLngToCanvasPoint(L.latLng(r,a))),c.beginPath(),c.moveTo(x.x+1,x.y),c.lineTo(_.x-1,_.y),c.stroke(),e.options.showLabel&&t){var g=x.y+p/2-2;c.fillText(S,0,g),c.fillText(S,h-u,g)}}},a=function(e,r){M=e.__format_lng(r),u=c.measureText(M).width;var a=e._latLngToCanvasPoint(L.latLng(g,r));if(o){"number"==typeof o&&(_lat_delta=o),c.beginPath(),c.moveTo(a.x,a.y);for(var s=null,l=g;l<y;l+=_lat_delta){var d=e._latLngToCanvasPoint(L.latLng(l,r));c.lineTo(d.x,d.y),e.options.showLabel&&t&&null!=s&&(s.y>8&&d.y<=8?c.fillText(M,d.x-u/2,p):s.y>=f&&d.y<f&&c.fillText(M,d.x-u/2,f-2)),s={x:d.x,y:d.y,lon:r,lat:l}}c.stroke()}else{var h=y;if(d=e._latLngToCanvasPoint(L.latLng(h,r)),i){(h=(h=n.containerPointToLatLng(L.point(d.x,0))).lat)>90&&(h=90),d=e._latLngToCanvasPoint(L.latLng(h,r));var m=n.containerPointToLatLng(L.point(a.x,f));(m=m.lat)<-90&&(m=-90),a=e._latLngToCanvasPoint(L.latLng(m,r))}c.beginPath(),c.moveTo(d.x,d.y+1),c.lineTo(a.x,a.y-1),c.stroke(),e.options.showLabel&&t&&(c.fillText(M,d.x-u/2,p+1),c.fillText(M,a.x-u/2,f-3))}};this._currLngInterval&&this._currLatInterval||this.__calcInterval();var s=this._currLatInterval,l=this._currLngInterval,c=e.getContext("2d");c.clearRect(0,0,e.width,e.height),c.lineWidth=this.options.weight,c.strokeStyle=this.options.color,c.fillStyle=this.options.fontColor,c.setLineDash(this.options.dashArray),this.options.font&&(c.font=this.options.font);var u=c.measureText("0").width,p=12;try{var d=c.font.trim().split(" ")[0];p=function(t){t.length>2&&"p"==t.charAt(t.length-2)&&(t=t.substr(0,t.length-2));try{return parseInt(t,10)}catch(t){}return 0}(d)}catch(t){}var h=e.width,f=e.height,m=n.containerPointToLatLng(L.point(0,0)),_=n.containerPointToLatLng(L.point(h,0)),g=n.containerPointToLatLng(L.point(h,f)).lat,y=m.lat,v=m.lng,b=_.lng,P=(y-g)/(.2*f);if(isNaN(P))return;P<1&&(P=1),g=g<-90?-90:parseInt(g-P,10),y=y>90?90:parseInt(y+P,10);var w=(b-v)/(.2*h);w<1&&(w=1),v>0&&b<0&&(b+=360),b=parseInt(b+w,10),v=parseInt(v-w,10);var x,S,M,C=.5;if(s>0){for(var T=s;T<=y;T+=s)T>=g&&r(this,T);for(T=0;T>=g;T-=s)T<=y&&r(this,T)}if(l>0){for(T=l;T<=b;T+=l)T>=v&&a(this,T);for(T=0;T>=v;T-=l)T<=b&&a(this,T)}}},_latLngToCanvasPoint:function(t){var e=this._map,n=e.project(L.latLng(t));return n._subtract(e.getPixelOrigin()),L.point(n).add(e._getMapPanePos())}}),L.latlngGraticule=function(t){return new L.LatLngGraticule(t)},L.Path.mergeOptions({dashSpeed:0});var n=L.Path.prototype.beforeAdd;L.Path.include({beforeAdd:function(t){n.bind(this)(t),this.options.dashSpeed&&(this._lastDashFrame=performance.now(),this._dashFrame=L.Util.requestAnimFrame(this._onDashFrame.bind(this)))},_onDashFrame:function(){if(this._renderer){var t=(performance.now()-this._lastDashFrame)*this.options.dashSpeed/1e3;this.options.dashOffset=Number(this.options.dashOffset||0)+t,this._renderer._updateStyle(this),this._lastDashFrame=performance.now(),this._dashFrame=L.Util.requestAnimFrame(this._onDashFrame.bind(this))}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scaleBar=void 0,n(15),n(19);var o={show:!0,activate:!0,opt:{position:"bottomright",metric:!0,imperial:!1}};e.scaleBar=function(){var t=Object.assign({},o.opt),e=L.control.betterscale(t);return e._leaflet_id="scalebar_control",e.__proto__.show=function(){this.$options.show=!0},e.__proto__.hide=function(){this.$options.show=!1},e.$options=new Proxy(Object.assign({},o),{set:function(t,n,o,i){return Reflect.set(t,n,o,i),"show"===n&&(o?(e.$options.activate=!0,e._container.style.display="block"):(e.$options.activate=!1,e._container.style.display="none")),!0}}),e}},function(t,e,n){var o=n(16),i=n(17);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var r={insert:"head",singleton:!1},a=(o(t.i,i,r),i.locals?i.locals:{});t.exports=a},function(t,e,n){"use strict";var o,i=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a={};function s(t,e,n){for(var o=0;o<e.length;o++){var i={css:e[o][1],media:e[o][2],sourceMap:e[o][3]};a[t][o]?a[t][o](i):a[t].push(m(i,n))}}function l(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,u=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function p(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=u(e,i);else{var r=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function d(t,e,n){var o=n.css,i=n.media,r=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var h=null,f=0;function m(t,e){var n,o,i;if(e.singleton){var r=f++;n=h||(h=l(e)),o=p.bind(null,n,r,!1),i=p.bind(null,n,r,!0)}else n=l(e),o=d.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}t.exports=function(t,e,n){return(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=i()),t=n.base?t+n.base:t,e=e||[],a[t]||(a[t]=[]),s(t,e,n),function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){a[t]||(a[t]=[]),s(t,e,n);for(var o=e.length;o<a[t].length;o++)a[t][o]();a[t].length=e.length,0===a[t].length&&delete a[t]}}}},function(t,e,n){(e=n(18)(!1)).push([t.i,".leaflet-control-better-scale {\n  margin-bottom: 15px !important;\n  margin-right: 300px !important;\n  height: 20px;\n}\n\n.leaflet-control-better-scale-upper-first-piece {\n  top: 0%;\n  left: 0%;\n  width: 25%;\n  background-color: transparent !important;\n  border: none !important;\n}\n\n.leaflet-control-better-scale-upper-second-piece {\n  top: 0%;\n  left: 50%;\n  width: 25%;\n  background-color: transparent !important;\n  border: none !important;\n  border-left: 1px solid #444444;\n  border-right: 1px solid #444444;\n}\n\n.leaflet-control-better-scale-lower-first-piece {\n  top: 50%;\n  left: 25%;\n  width: 25%;\n  border-left: 1px solid #444444;\n  border-right: 1px solid #444444;\n}\n\n.leaflet-control-better-scale-lower-second-piece {\n  top: 50%;\n  left: 75%;\n  width: 30%;\n}\n\n.leaflet-control-better-scale-ruler-block {\n  overflow: hidden;\n  position: absolute;\n  height: 50%;\n  background-color: #444444;\n}\n\n.leaflet-control-better-scale-ruler {\n  overflow: hidden;\n  position: relative;\n  width: 100%;\n  height: 7px;\n  background-color: transparent;\n  border-bottom: 2px solid #444444;\n}\n\n.leaflet-control-better-scale-label-div {\n  position: relative;\n  width: 100%;\n}\n\n.leaflet-control-better-scale-label {\n  position: absolute;\n  width: 10%;\n  text-align: center;\n  color: #fff;\n  font-family: sans-serif;\n  font-weight: bold;\n  font-size: 12px;\n  height: 5px;\n  top: -1px;\n  text-shadow: 1px 0 0 #000, 0 -1px 0 #000, 0 1px 0 #000, -1px 0 0 #000;\n}\n\n.leaflet-control-better-scale-first-number {\n  left: 45%;\n}\n\n.leaflet-control-better-scale-second-number {\n  left: 95%;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=(a=o,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),r=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot).concat(t," */")}));return[n].concat(r).concat([i]).join("\n")}var a,s,l;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o=0;o<t.length;o++){var i=[].concat(t[o]);n&&(i[2]?i[2]="".concat(n," and ").concat(i[2]):i[2]=n),e.push(i)}},e}},function(t,e){L.Control.BetterScale=L.Control.extend({options:{position:"bottomleft",maxWidth:150,metric:!1,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-better-scale",n=L.DomUtil.create("div",e),o=this.options,i=L.DomUtil.create("div",e+"-ruler",n);return L.DomUtil.create("div",e+"-ruler-block "+e+"-upper-first-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-upper-second-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-lower-first-piece",i),L.DomUtil.create("div",e+"-ruler-block "+e+"-lower-second-piece",i),this._addScales(o,e,n),this.ScaleContainer=n,t.on(o.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){this._iScale=L.DomUtil.create("div",e+"-label-div",n),this._iScaleLabel=L.DomUtil.create("div",e+"-label",this._iScale),this._iScaleFirstNumber=L.DomUtil.create("div",e+"-label "+e+"-first-number",this._iScale),this._iScaleSecondNumber=L.DomUtil.create("div",e+"-label "+e+"-second-number",this._iScale)},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,n=6378137*Math.PI*Math.cos(e*Math.PI/180)*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),i=this.options,r=0;o.x>0&&(r=n*(i.maxWidth/o.x)),this._updateScales(i,r)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric_old:function(t){var e=this._getRoundNum(t);this._iScale.style.width=this._getScaleWidth(e/t)+"px",this._iScaleLabel.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateMetric:function(t){var e,n,o,i,r,a=t,s=this._iScaleFirstNumber,l=this._iScaleSecondNumber,c=this._iScale;this._iScaleLabel.innerHTML="0",a>500?(e=a/1e3,n=this._getRoundNum(e),i=this._getRoundNum(e/2),c.style.width=this._getScaleWidth(n/e)+"px",s.innerHTML=i,l.innerHTML=n+"km"):(o=this._getRoundNum(a),r=this._getRoundNum(a/2),c.style.width=this._getScaleWidth(o/a)+"px",s.innerHTML=r,l.innerHTML=o+"m")},_updateImperial:function(t){var e,n,o,i,r,a=3.2808399*t,s=this._iScaleFirstNumber,l=this._iScaleSecondNumber,c=this._iScale;this._iScaleLabel.innerHTML="0",a>2640?(e=a/5280,n=this._getRoundNum(e),i=this._getRoundNum(e/2),c.style.width=this._getScaleWidth(n/e)+"px",s.innerHTML=i,l.innerHTML=n+"mi"):(o=this._getRoundNum(a),r=this._getRoundNum(a/2),c.style.width=this._getScaleWidth(o/a)+"px",s.innerHTML=r,l.innerHTML=o+"ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){if(t>=2){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}return(Math.round(100*t)/100).toFixed(1)}}),L.control.betterscale=function(t){return new L.Control.BetterScale(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pointer=void 0;var o={show:!0,activate:!0,opt:{position:"bottomright"}};e.pointer=function(){var t=Object.assign({},o.opt),e=L.control(t);return e._leaflet_id="pointer_control",e.onAdd=function(){var t=this;t._container=L.DomUtil.create("div"),t._container.style.width="200px",t._container.style.height="20px",t._container.style.position="absolute",t._container.style.right="10px",t._container.style.bottom="0px",t._container.style.zindex=2,t._container.style.textAlign="center";var e=L.DomUtil.create("div");return e.style.fontSize="14px",e.style.color="#222",t._container.appendChild(e),t._container},T.map.on("mousemove",(function(t){e._container.innerText=Number(t.latlng.lng).toFixed(6)+","+Number(t.latlng.lat).toFixed(6)})),e.__proto__.show=function(){this.$options.show=!0},e.__proto__.hide=function(){this.$options.show=!1},e.$options=new Proxy(Object.assign({},o),{set:function(t,n,o,i){return Reflect.set(t,n,o,i),"show"===n&&(o?(e.$options.activate=!0,e._container.style.display="block"):(e.$options.activate=!1,e._container.style.display="none")),!0}}),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.printer=void 0,n(22);var o={show:!0,activate:!0,opt:{position:"topright"}};e.printer=function(){var t=Object.assign({},o.opt),e=L.control.browserPrint(t);e.__proto__.show=function(){this.$options.show=!0},e.__proto__.hide=function(){this.$options.show=!1},e.$options=new Proxy(Object.assign({},o),{set:function(t,n,o,i){return Reflect.set(t,n,o,i),"show"===n&&(o?(e.$options.activate=!0,e._container.style.display="block"):(e.$options.activate=!1,e._container.style.display="none")),!0}}),e.$options.title=document.title,T.map.on("browser-print",(function(t){var n=prompt("输入地图名称：",e.$options.title);t.printMap._container.ownerDocument.title=n||e.$options.title;var o=t.printMap.getPane("overlayPane").querySelector("canvas");o&&(o.style.border="2px solid #666666",o.style.width=parseInt(o.style.width.replace("px",""))-3+"px",o.style.height=parseInt(o.style.height.replace("px",""))-3+"px")})),T.map.on("browser-print-end",(function(t){document.title=e.$options.title,location.reload()}));var n=function(){e._clearPrint(),document.body.className=document.body.className.replace(" leaflet--printing",""),e._map.invalidateSize({reset:!0,animate:!1,pan:!1})};window.matchMedia&&window.matchMedia("print").addListener((function(t){t.matches||n()}));return window.onafterprint=n,e}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*!
 *
 *  leaflet.browser.print - v1.0.2 (https://github.com/Igor-Vladyka/leaflet.browser.print)
 *  A leaflet plugin which allows users to print the map directly from the browser
 *
 *  MIT (http://www.opensource.org/licenses/mit-license.php)
 *  (c) 2019  Igor Vladyka <igor.vladyka@gmail.com> (https://github.com/Igor-Vladyka/)
 *
 */!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==n(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(i,r,function(e){return t[e]}.bind(null,r));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e){L.Control.BrowserPrint.Size={A:{Width:840,Height:1188},B:{Width:1e3,Height:1414},C:{Width:916,Height:1296},D:{Width:770,Height:1090},LETTER:{Width:216,Height:279},HALFLETTER:{Width:140,Height:216},LEGAL:{Width:216,Height:356},JUNIORLEGAL:{Width:127,Height:203},TABLOID:{Width:279,Height:432},LEDGER:{Width:432,Height:279}},L.Control.BrowserPrint.Mode=function(t,e,n,o,i){if(!t)throw"Print mode should be specified.";this.Mode=t,this.Title=e||t,this.PageSize=(n||"A4").toUpperCase(),this.PageSeries=-1!=["A","B","C","D"].indexOf(this.PageSize[0])?this.PageSize[0]:"",this.PageSeriesSize=this.PageSize.substring(this.PageSeries.length),this.Action=o||function(t,e){return function(){t["_print"+e.Mode](e)}},this.InvalidateBounds=i},L.Control.BrowserPrint.Mode.Landscape="Landscape",L.Control.BrowserPrint.Mode.Portrait="Portrait",L.Control.BrowserPrint.Mode.Auto="Auto",L.Control.BrowserPrint.Mode.Custom="Custom",L.Control.BrowserPrint.Mode.prototype.getPageMargin=function(){var t=this.getPaperSize();return Math.floor((t.Width+t.Height)/40)+"mm"},L.Control.BrowserPrint.Mode.prototype.getPaperSize=function(){if(this.PageSeries){var t=L.Control.BrowserPrint.Size[this.PageSeries],e=t.Width,n=t.Height,o=!1;return this.PageSeriesSize&&(this.PageSeriesSize=+this.PageSeriesSize,(o=this.PageSeriesSize%2==1)?(e/=this.PageSeriesSize-1||1,n/=this.PageSeriesSize+1):(e/=this.PageSeriesSize,n/=this.PageSeriesSize)),{Width:o?n:e,Height:o?e:n}}var i=L.Control.BrowserPrint.Size[this.PageSeriesSize];return{Width:i.Width,Height:i.Height}},L.Control.BrowserPrint.Mode.prototype.getSize=function(){var t=this.getPaperSize(),e=parseInt(this.getPageMargin()),n=function(t){return e?t-2*e:t};return t.Width=Math.floor(n(t.Width))+"mm",t.Height=Math.floor(n(t.Height))+"mm",t},L.control.browserPrint.mode=function(t,e,n,o,i){return new L.Control.BrowserPrint.Mode(t,e,n,o,i)},L.control.browserPrint.mode.portrait=function(t,e,n){return L.control.browserPrint.mode(L.Control.BrowserPrint.Mode.Portrait,t,e,n,!1)},L.control.browserPrint.mode.landscape=function(t,e,n){return L.control.browserPrint.mode(L.Control.BrowserPrint.Mode.Landscape,t,e,n,!1)},L.control.browserPrint.mode.auto=function(t,e,n){return L.control.browserPrint.mode(L.Control.BrowserPrint.Mode.Auto,t,e,n,!0)},L.control.browserPrint.mode.custom=function(t,e,n){return L.control.browserPrint.mode(L.Control.BrowserPrint.Mode.Custom,t,e,n,!0)}},function(t,e){L.Control.BrowserPrint.Utils={_ignoreArray:[],_cloneFactoryArray:[],_cloneRendererArray:[],_knownRenderers:{},cloneOptions:function(t){var e={};for(var n in t){var o=t[n];o&&o.clone?e[n]=o.clone():o&&o.onAdd?e[n]=this.cloneLayer(o):e[n]=o}return e},cloneBasicOptionsWithoutLayers:function(t){var e={},n=Object.getOwnPropertyNames(t);if(n.length){for(var o=0;o<n.length;o++){var i=n[o];i&&"layers"!=i&&(e[i]=t[i])}return this.cloneOptions(e)}return e},cloneInnerLayers:function(t){var e=this,n=[];return t.eachLayer((function(t){var o=e.cloneLayer(t);o&&n.push(o)})),n},initialize:function(){this._knownRenderers={},this.registerRenderer(L.SVG,"L.SVG"),this.registerRenderer(L.Canvas,"L.Canvas"),this.registerLayer(L.TileLayer.WMS,"L.TileLayer.WMS",(function(t,e){return L.tileLayer.wms(t._url,e.cloneOptions(t.options))})),this.registerLayer(L.TileLayer,"L.TileLayer",(function(t,e){return L.tileLayer(t._url,e.cloneOptions(t.options))})),this.registerLayer(L.GridLayer,"L.GridLayer",(function(t,e){return L.gridLayer(e.cloneOptions(t.options))})),this.registerLayer(L.ImageOverlay,"L.ImageOverlay",(function(t,e){return L.imageOverlay(t._url,t._bounds,e.cloneOptions(t.options))})),this.registerLayer(L.Marker,"L.Marker",(function(t,e){return L.marker(t.getLatLng(),e.cloneOptions(t.options))})),this.registerLayer(L.Popup,"L.Popup",(function(t,e){return L.popup(e.cloneOptions(t.options)).setLatLng(t.getLatLng()).setContent(t.getContent())})),this.registerLayer(L.Circle,"L.Circle",(function(t,e){return L.circle(t.getLatLng(),t.getRadius(),e.cloneOptions(t.options))})),this.registerLayer(L.CircleMarker,"L.CircleMarker",(function(t,e){return L.circleMarker(t.getLatLng(),e.cloneOptions(t.options))})),this.registerLayer(L.Rectangle,"L.Rectangle",(function(t,e){return L.rectangle(t.getBounds(),e.cloneOptions(t.options))})),this.registerLayer(L.Polygon,"L.Polygon",(function(t,e){return L.polygon(t.getLatLngs(),e.cloneOptions(t.options))})),this.registerLayer(L.MultiPolyline,"L.MultiPolyline",(function(t,e){return L.polyline(t.getLatLngs(),e.cloneOptions(t.options))})),this.registerLayer(L.MultiPolygon,"L.MultiPolygon",(function(t,e){return L.multiPolygon(t.getLatLngs(),e.cloneOptions(t.options))})),this.registerLayer(L.Polyline,"L.Polyline",(function(t,e){return L.polyline(t.getLatLngs(),e.cloneOptions(t.options))})),this.registerLayer(L.GeoJSON,"L.GeoJSON",(function(t,e){return L.geoJson(t.toGeoJSON(),e.cloneOptions(t.options))})),this.registerIgnoreLayer(L.FeatureGroup,"L.FeatureGroup"),this.registerIgnoreLayer(L.LayerGroup,"L.LayerGroup"),this.registerLayer(L.Tooltip,"L.Tooltip",(function(){return null}))},_register:function(t,e,n,o){e&&!t.filter((function(t){return t.identifier===n})).length&&t.push({type:e,identifier:n,builder:o||function(t){return new e(t.options)}})},registerLayer:function(t,e,n){this._register(this._cloneFactoryArray,t,e,n)},registerRenderer:function(t,e,n){this._register(this._cloneRendererArray,t,e,n)},registerIgnoreLayer:function(t,e){this._register(this._ignoreArray,t,e)},cloneLayer:function(t){return t?this.__getRenderer(t)||((e=t._group?this.__getFactoryObject(t._group,!0):this.__getFactoryObject(t))&&(e=e.builder(t,this)),e):null;var e},getType:function(t){if(!t)return null;var e=this.__getFactoryObject(t);return e&&(e=e.identifier),e},__getRenderer:function(t){var e=this._knownRenderers[t._leaflet_id];if(!e){for(var n=0;n<this._cloneRendererArray.length;n++){var o=this._cloneRendererArray[n];if(t instanceof o.type){this._knownRenderers[t._leaflet_id]=o.builder(t.options);break}}e=this._knownRenderers[t._leaflet_id]}return e},__getFactoryObject:function(t,e){if(!e)for(var n=0;n<this._ignoreArray.length;n++){var o=this._ignoreArray[n];if(o.type&&t instanceof o.type)return null}for(n=0;n<this._cloneFactoryArray.length;n++)if((i=this._cloneFactoryArray[n]).type&&t instanceof i.type)return i;for(n=0;n<this._cloneRendererArray.length;n++){var i;if((i=this._cloneRendererArray[n]).type&&t instanceof i.type)return null}return this.__unknownLayer__(),null},__unknownLayer__:function(){console.warn("Unknown layer, cannot clone this layer. Leaflet version: "+L.version),console.info("For additional information please refer to documentation on: https://github.com/Igor-Vladyka/leaflet.browser.print."),console.info("-------------------------------------------------------------------------------------------------------------------")}}},function(t,e){L.Control.BrowserPrint=L.Control.extend({options:{title:"Print map",documentTitle:"",position:"topleft",printLayer:null,printModes:["Portrait","Landscape","Auto","Custom"],printTitles:{Portrait:"竖版",Landscape:"横版",Auto:"自动",Custom:"自定义"},closePopupsOnPrint:!0,contentSelector:"[leaflet-browser-print-content]",pagesSelector:"[leaflet-browser-print-pages]",manualMode:!1,customPrintStyle:{color:"gray",dashArray:"5, 10",pane:"customPrintPane"}},onAdd:function(t){this.options.customPrintStyle.pane&&!t.getPane(this.options.customPrintStyle.pane)&&(t.createPane(this.options.customPrintStyle.pane).style.zIndex=9999);var e=L.DomUtil.create("div","leaflet-control-browser-print leaflet-bar leaflet-control");return L.DomEvent.disableClickPropagation(e),this._appendControlStyles(e),this.options.printModes.length>1?(L.DomEvent.addListener(e,"mouseover",this._displayPageSizeButtons,this),L.DomEvent.addListener(e,"mouseout",this._hidePageSizeButtons,this)):e.style.cursor="pointer",this.options.position.indexOf("left")>0?(this._createIcon(e),this._createMenu(e)):(this._createMenu(e),this._createIcon(e)),t.printControl=this,e},_createIcon:function(t){return this.__link__=L.DomUtil.create("a","",t),this.__link__.className="leaflet-browser-print",this.options.title&&(this.__link__.title=this.options.title),this.__link__},_createMenu:function(t){for(var e=[],n=0;n<this.options.printModes.length;n++){var o=this.options.printModes[n];if(o.length){var i=o[0].toUpperCase()+o.substring(1).toLowerCase();o=L.control.browserPrint.mode[o.toLowerCase()](this._getDefaultTitle(i))}else if(!(o instanceof L.Control.BrowserPrint.Mode))throw"Invalid Print Mode. Can't construct logic to print current map.";1==this.options.printModes.length?o.Element=t:(o.Element=L.DomUtil.create("li","browser-print-mode",L.DomUtil.create("ul","browser-print-holder",t)),o.Element.innerHTML=this.options.printTitles[o.Title]),L.DomEvent.addListener(o.Element,"click",o.Action(this,o),this),e.push(o)}this.options.printModes=e},_getDefaultTitle:function(t){return this.options.printModesNames&&this.options.printModesNames[t]||t},_displayPageSizeButtons:function(){this.options.position.indexOf("left")>0?(this.__link__.style.borderTopRightRadius="0px",this.__link__.style.borderBottomRightRadius="0px"):(this.__link__.style.borderTopLeftRadius="0px",this.__link__.style.borderBottomLeftRadius="0px"),this.options.printModes.forEach((function(t){t.Element.style.display="inline-block"}))},_hidePageSizeButtons:function(){this.options.position.indexOf("left")>0?(this.__link__.style.borderTopRightRadius="",this.__link__.style.borderBottomRightRadius=""):(this.__link__.style.borderTopLeftRadius="",this.__link__.style.borderBottomLeftRadius=""),this.options.printModes.forEach((function(t){t.Element.style.display=""}))},_getMode:function(t,e){return new L.control.browserPrint.mode(t,e.Title,e.PageSize,e.Action,e.InvalidateBounds)},_printLandscape:function(t){this._addPrintClassToContainer(this._map,"leaflet-browser-print--landscape"),this._print(t)},_printPortrait:function(t){this._addPrintClassToContainer(this._map,"leaflet-browser-print--portrait"),this._print(t)},_printAuto:function(t){this._addPrintClassToContainer(this._map,"leaflet-browser-print--auto");var e=this._getBoundsForAllVisualLayers(),n=this._getPageSizeFromBounds(e);this._print(this._getMode(n,t),e)},_printCustom:function(t){this._addPrintClassToContainer(this._map,"leaflet-browser-print--custom"),this.options.custom={mode:t},this._map.on("mousedown",this._startAutoPoligon,this)},_addPrintClassToContainer:function(t,e){var n=t.getContainer();-1===n.className.indexOf(e)&&(n.className+=" "+e)},_removePrintClassFromContainer:function(t,e){var n=t.getContainer();n.className&&n.className.indexOf(e)>-1&&(n.className=n.className.replace(" "+e,""))},_startAutoPoligon:function(t){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),this._map.dragging.disable(),this.options.custom.start=t.latlng,this._map.off("mousedown",this._startAutoPoligon,this),this._map.on("mousemove",this._moveAutoPoligon,this),this._map.on("mouseup",this._endAutoPoligon,this)},_moveAutoPoligon:function(t){this.options.custom&&(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),this.options.custom.rectangle?this.options.custom.rectangle.setBounds(L.latLngBounds(this.options.custom.start,t.latlng)):(this.options.custom.rectangle=L.rectangle([this.options.custom.start,t.latlng],this.options.customPrintStyle),this.options.custom.rectangle.addTo(this._map)))},_endAutoPoligon:function(t){if(t.originalEvent.preventDefault(),t.originalEvent.stopPropagation(),this._map.off("mousemove",this._moveAutoPoligon,this),this._map.off("mouseup",this._endAutoPoligon,this),this._map.dragging.enable(),this.options.custom&&this.options.custom.rectangle){var e=this.options.custom.rectangle.getBounds();this._map.removeLayer(this.options.custom.rectangle);var n=this._getPageSizeFromBounds(e);this._print(this._getMode(n,this.options.custom.mode),e),delete this.options.custom}else this._clearPrint()},_getPageSizeFromBounds:function(t){return Math.abs(t.getNorth()-t.getSouth())>Math.abs(t.getEast()-t.getWest())?"Portrait":"Landscape"},_setupPrintPagesWidth:function(t,e,n){t.style.width="Landscape"===n?e.Height:e.Width},_setupPrintMapHeight:function(t,e,n){t.style.height="Landscape"===n?e.Width:e.Height},cancel:function(t){this.cancelNextPrinting=t},print:function(t,e){this._print(this._getMode(t.Mode,t),e)},_print:function(t,e){this._map.fire(L.Control.BrowserPrint.Event.PrintInit,{mode:t}),L.Control.BrowserPrint.Utils.initialize();var n=this,o=this._map.getContainer(),i=t.Mode,r={bounds:e||this._map.getBounds(),width:o.style.width,height:o.style.height,documentTitle:document.title,printLayer:L.Control.BrowserPrint.Utils.cloneLayer(this.options.printLayer),panes:[]},a=this._map.getPanes();for(var s in a)r.panes.push({name:s,container:void 0});if(r.printObjects=this._getPrintObjects(r.printLayer),this._map.fire(L.Control.BrowserPrint.Event.PrePrint,{printLayer:r.printLayer,printObjects:r.printObjects,pageOrientation:i,printMode:t.Mode,pageBounds:r.bounds}),this.cancelNextPrinting)delete this.cancelNextPrinting;else{var l=this._addPrintMapOverlay(t.PageSize,t.getPageMargin(),t.getSize(),i,r);this.options.documentTitle&&(document.title=this.options.documentTitle),this._map.fire(L.Control.BrowserPrint.Event.PrintStart,{printLayer:r.printLayer,printMap:l.map,printObjects:l.objects}),t.InvalidateBounds?(l.map.fitBounds(r.bounds),l.map.invalidateSize({reset:!0,animate:!1,pan:!1})):l.map.setView(this._map.getCenter(),this._map.getZoom());var c=setInterval((function(){n._isTilesLoading(l.map)||(clearInterval(c),n.options.manualMode?n._setupManualPrintButton(l.map,r,l.objects):n._completePrinting(l.map,r,l.objects))}),50)}},_completePrinting:function(t,e,n){var o=this;setTimeout((function(){o._map.fire(L.Control.BrowserPrint.Event.Print,{printLayer:e.printLayer,printMap:t,printObjects:n});var i=window.print();i?Promise.all([i]).then((function(){o._printEnd(e),o._map.fire(L.Control.BrowserPrint.Event.PrintEnd,{printLayer:e.printLayer,printMap:t,printObjects:n})})):(o._printEnd(e),o._map.fire(L.Control.BrowserPrint.Event.PrintEnd,{printLayer:e.printLayer,printMap:t,printObjects:n}))}),1e3)},_getBoundsForAllVisualLayers:function(){var t=null;for(var e in this._map._layers){var n=this._map._layers[e];n._url||n._mutant||(t?n.getBounds?t.extend(n.getBounds()):n.getLatLng&&t.extend(n.getLatLng()):n.getBounds?t=n.getBounds():n.getLatLng&&(t=L.latLngBounds(n.getLatLng(),n.getLatLng())))}return t||(t=this._map.getBounds()),t},_clearPrint:function(){this._removePrintClassFromContainer(this._map,"leaflet-browser-print--landscape"),this._removePrintClassFromContainer(this._map,"leaflet-browser-print--portrait"),this._removePrintClassFromContainer(this._map,"leaflet-browser-print--auto"),this._removePrintClassFromContainer(this._map,"leaflet-browser-print--custom")},_printEnd:function(t){this._clearPrint(),document.body.removeChild(this.__overlay__),this.__overlay__=null,document.body.className=document.body.className.replace(" leaflet--printing",""),this.options.documentTitle&&(document.title=t.documentTitle),this._map.invalidateSize({reset:!0,animate:!1,pan:!1})},_getPrintObjects:function(t){var e={};for(var n in this._map._layers){var o=this._map._layers[n];if(!t||!o._url||o instanceof L.TileLayer.WMS){var i=L.Control.BrowserPrint.Utils.getType(o);i&&(e[i]||(e[i]=[]),e[i].push(o))}}return e},_addPrintCss:function(t,e,n){var o=document.createElement("style");switch(o.className="leaflet-browser-print-css",o.setAttribute("type","text/css"),o.innerHTML=" @media print {.header{font-size:50px;font-weight:bold} .leaflet-popup-content-wrapper, .leaflet-popup-tip { box-shadow: none; }",o.innerHTML+=" .leaflet-browser-print--manualMode-button { display: none; }",o.innerHTML+=" * { -webkit-print-color-adjust: exact!important; printer-colors: exact!important; color-adjust: exact!important; }",e&&(o.innerHTML+=" @page { margin: "+e+"; }"),o.innerHTML+=" @page :first { page-break-after: always; }",n){case"Landscape":o.innerText+=" @page { size : "+t+" landscape; }";break;default:case"Portrait":o.innerText+=" @page { size : "+t+" portrait; }"}return o},_appendControlStyles:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML+=" .leaflet-control-browser-print { display: flex;margin-right:20px !important;margin-top:150px!important } .leaflet-control-browser-print a {  width:30px !important;height:30px !important; background: #fff url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gcCCi8Vjp+aNAAAAGhJREFUOMvFksENgDAMA68RC7BBN+Cf/ZU33QAmYAT6BolAGxB+RrrIsg1BpfNBVXcPMLMDI/ytpKozMHWwK7BJJ7yYWQbGdBea9wTIkRDzKy0MT7r2NiJACRgotCzxykFI34QY2Ea7KmtxGJ+uX4wfAAAAAElFTkSuQmCC') no-repeat 5px; background-position:center;background-size: 16px 16px; display: block; border-radius: 2px; }",e.innerHTML+="",e.innerHTML+=" .browser-print-holder { margin: 0px; padding: 0px; list-style: none; white-space: nowrap; } .browser-print-holder-left li:last-child { border-top-right-radius: 2px; border-bottom-right-radius: 2px; } .browser-print-holder-right li:first-child { border-top-left-radius: 2px; border-bottom-left-radius: 2px; }",e.innerHTML+=" .browser-print-mode { display: none; background-color: #ffffff; color: #444; font: 11px/19px 'Helvetica Neue', Arial, Helvetica, sans-serif; text-decoration: none; padding: 4px 10px; text-align: center; } .browser-print-mode { padding: 6px 10px; } .browser-print-mode:hover { background-color: #dddddd; cursor: pointer; }",e.innerHTML+=" .leaflet-browser-print--custom, .leaflet-browser-print--custom path { cursor: crosshair!important; }",e.innerHTML+=" .leaflet-print-overlay { width: 100%; height:auto; min-height: 100%; position: absolute; top: 0; background-color: white!important; left: 0; z-index: 1001; display: block!important; } ",e.innerHTML+=" .leaflet--printing { height:auto; min-height: 100%; margin: 0px!important; padding: 0px!important; } body.leaflet--printing > * { display: none; box-sizing: border-box; }",e.innerHTML+=" .grid-print-container { grid-template: 1fr / 1fr; box-sizing: border-box; } .grid-map-print { grid-row: 1; grid-column: 1; } body.leaflet--printing .grid-print-container [leaflet-browser-print-content]:not(style) { display: unset!important; }",e.innerHTML+=" .pages-print-container { box-sizing: border-box; }",t.appendChild(e)},_setupManualPrintButton:function(t,e,n){var o=document.createElement("button");o.className="leaflet-browser-print--manualMode-button",o.innerHTML="Print",o.style.position="absolute",o.style.top="20px",o.style.right="20px",this.__overlay__.appendChild(o);var i=this;L.DomEvent.addListener(o,"click",(function(){i._completePrinting(t,e,n)}))},_addPrintMapOverlay:function(t,e,n,o,i){this.__overlay__=document.createElement("div"),this.__overlay__.className=this._map.getContainer().className+" leaflet-print-overlay",document.body.appendChild(this.__overlay__),this.__overlay__.appendChild(this._addPrintCss(t,e,o));var r=document.createElement("div");if(r.className="grid-print-container",r.style.width="100%",r.style.display="grid",this._setupPrintMapHeight(r,n,o),this.options.contentSelector){var a=document.querySelectorAll(this.options.contentSelector);if(a&&a.length)for(var s=0;s<a.length;s++){var l=a[s].cloneNode(!0);r.appendChild(l)}}if(this.options.pagesSelector&&document.querySelectorAll(this.options.pagesSelector).length){var c=document.createElement("div");c.className="pages-print-container",c.style.margin="0!important",this._setupPrintPagesWidth(c,n,o),this.__overlay__.appendChild(c),c.appendChild(r);var u=document.querySelectorAll(this.options.pagesSelector);if(u&&u.length)for(s=0;s<u.length;s++){var p=u[s].cloneNode(!0);c.appendChild(p)}}else this._setupPrintPagesWidth(r,n,o),this.__overlay__.appendChild(r);var d=document.createElement("div");d.id=this._map.getContainer().id+"-print",d.className="grid-map-print",d.style.width="100%",d.style.height="100%",r.appendChild(d),document.body.className+=" leaflet--printing";var h=L.Control.BrowserPrint.Utils.cloneBasicOptionsWithoutLayers(this._map.options);return h.maxZoom=this._map.getMaxZoom(),this._setupPrintMap(d.id,h,i.printLayer,i.printObjects,i.panes)},_setupPrintMap:function(t,e,n,o,i){e.zoomControl=!1,e.dragging=!1,e.zoomAnimation=!1,e.fadeAnimation=!1,e.markerZoomAnimation=!1,e.keyboard=!1,e.scrollWheelZoom=!1,e.tap=!1,e.touchZoom=!1;var r=L.map(t,e);for(var a in n&&n.addTo(r),i.forEach((function(t){r.createPane(t.name,t.container)})),o){var s=this.options.closePopupsOnPrint;o[a]=o[a].map((function(t){var e=L.Control.BrowserPrint.Utils.cloneLayer(t);if(e){if(t instanceof L.Popup?(t.isOpen||(t.isOpen=function(){return this._isOpen}),t.isOpen()&&!s&&e.openOn(r)):e.addTo(r),t instanceof L.Layer){var n=t.getTooltip();n&&(e.bindTooltip(n.getContent(),n.options),t.isTooltipOpen()&&e.openTooltip(n.getLatLng()))}return e}}))}return{map:r,objects:o}},_isTilesLoading:function(t){return parseFloat(L.version)>1?this._getLoadingLayers(t):t._tilesToLoad||t._tileLayersToLoad},_getLoadingLayers:function(t){for(var e in t._layers){var n=t._layers[e];if((n._url||n._mutant)&&n._loading)return!0}return!1}}),L.Control.BrowserPrint.Event={PrintInit:"browser-print-init",PrePrint:"browser-pre-print",PrintStart:"browser-print-start",Print:"browser-print",PrintEnd:"browser-print-end"},L.control.browserPrint=function(t){if(t&&t.printModes||((t=t||{}).printModes=[L.control.browserPrint.mode.portrait(),L.control.browserPrint.mode.landscape(),L.control.browserPrint.mode.auto(),L.control.browserPrint.mode.custom()]),t&&t.printModes&&(!t.printModes.filter||!t.printModes.length))throw"Please specify valid print modes for Print action. Example: printModes: [L.control.browserPrint.mode.portrait(), L.control.browserPrint.mode.auto('Automatico'), 'Custom']";return t.printModesNames&&console.warn("'printModesNames' option is obsolete. Please use 'L.control.browserPrint.mode.*(/*Title*/)' shortcut instead. Please check latest release and documentation."),new L.Control.BrowserPrint(t)}},function(t,e,n){n(2),n(1),t.exports=n(0)}])},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.iconOpt=e.icon=void 0;var i={iconUrl:"",iconRetinaUrl:"",iconSize:null,iconAnchor:null,popupAnchor:[0,0],tooltipAnchor:[0,0],shadowUrl:null,shadowRetinaUrl:null,shadowSize:null,shadowAnchor:null,className:""};e.iconOpt=i;e.icon=function(t){var e={};return"object"===o(t)?e=Object.assign(i,t):"string"==typeof t&&((e=Object.assign({},i)).iconUrl=t),L.icon(e)}}])}));