<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>迁徙图</title>
  <script src="libs/jquery-3.4.1.min.js"></script>
  <link rel="stylesheet" href="libs/layui/css/layui.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="libs/leaflet/leaflet-src.js"></script>
  <link rel="stylesheet" href="libs/leaflet/leaflet.css"/>
  <script src="libs/supermap/iclient-leaflet.js"></script>
  <script src="./t-gis/tmap.min.js"></script>
</head>
<body>
<div id="map" style=";width:100%;height:100%"></div>
<script>
  T.createMap('map');
  T.map.setView([35, 114], 5);
  T.map.addControl(T.controls.pointer());
  let supermapLayer = T.cusTileLayer("https://iserver.supermap.io/iserver/services/map-china400/rest/maps/ChinaDark", {
    maxZoom: 18,
    minZoom: 0
  }, false);
  T.map.addLayer(supermapLayer);
  let to = {
    geometry: {
      type: 'Point',
      coordinates: [T.vis.cityCenter.getCenterByCityName("北京").lng, T.vis.cityCenter.getCenterByCityName("北京").lat]
    }
  }
  let data = [
    {
      fromName: '河北',
      count: 354551,
      to: to,
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("河北").lng, T.vis.cityCenter.getCenterByCityName("河北").lat]
        }
      },
      toName: "北京"
    },
    {
      fromName: '天津',
      count: 97323,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("天津").lng, T.vis.cityCenter.getCenterByCityName("天津").lat]
        }
      },
    },
    {
      fromName: '山东',
      count: 28664,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("山东").lng, T.vis.cityCenter.getCenterByCityName("山东").lat]
        }
      },
    },
    {
      fromName: '山西',
      count: 16650,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("山西").lng, T.vis.cityCenter.getCenterByCityName("山西").lat]
        }
      },
    },
    {
      fromName: '辽宁',
      count: 14379,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("辽宁").lng, T.vis.cityCenter.getCenterByCityName("辽宁").lat]
        }
      },
    },
    {
      fromName: '河南',
      count: 10980,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("河南").lng, T.vis.cityCenter.getCenterByCityName("河南").lat]
        }
      },
    },

    {
      fromName: '江苏',
      count: 4536,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("江苏").lng, T.vis.cityCenter.getCenterByCityName("江苏").lat]
        }
      },
    },
    {
      fromName: '上海',
      count: 3556,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("上海").lng, T.vis.cityCenter.getCenterByCityName("上海").lat]
        }
      },
    },
    {
      fromName: '广东',
      count: 2600,
      to: to,
      toName: "北京",
      from: {
        geometry: {
          type: 'Point',
          coordinates: [T.vis.cityCenter.getCenterByCityName("广东").lng, T.vis.cityCenter.getCenterByCityName("广东").lat]
        }
      },
    }]
  let group = T.vis.trackLayer(data, {});
  for (let i = 0; i < group.length; i++) {
    group[i].addTo(T.map);
  }
</script>
</body>
</html>
